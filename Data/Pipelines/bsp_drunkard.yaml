name: bsp_drunkard
description: "BSP dungeon with organic drunkard walk tunnels between rooms"

dimensions:
  width: 80
  height: 70

passes:
  - pass: bsp
    priority: 0
    config:
      minPartitionSize: 8
      maxPartitionSize: 14
      minRoomWidth: 6
      maxRoomWidth: 12
      minRoomHeight: 6
      maxRoomHeight: 12
      corridorWidth: 1

  # Drunkard walk modifier adds organic tunnels between rooms
  - pass: drunkard_walk
    priority: 50
    config:
      targetFloorPercent: 12
      walkerCount: 3
      maxStepsPerWalker: 800
      tunnelWidth: 1
      turnChance: 40
      startFromCenter: false
      roomChance: 5

  - pass: extra_connections
    priority: 100
    config:
      connectionChance: 15
      maxDistance: 25
      corridorWidth: 1
      lShaped: true

  - pass: connectivity
    priority: 300
    config:
      repairStrategy: mst
      maxCorridorLength: 20

  - pass: validation
    priority: 400
    config:
      minWalkablePercent: 20
      maxWalkablePercent: 50

  - pass: metadata
    priority: 999
    config:
      minRegionSize: 12
      maxPassageWidth: 2

metadata:
  minRegionSize: 12
  maxPassageWidth: 2
  distanceFields:
    - walls
    - entrance
    - exit

# Layout-dependent spawn settings
spawnSettings:
  itemDensity: 0.006
  goldDensity: 0.015
  encounterChance: 0.7
  maxEncounterRatio: 0.6
  minEncounterSpacing: 6
  maxEncountersPerRegion: 1
  playerExclusionRadius: 13
  regionMatchMultiplier: 1.5
  dangerBonusMultiplier: 1.3
  minCreatureCount: 3

  # Winding passages favor ambushes and patrols
  encounterWeights:
    - id: ambush
      weight: 25
    - id: patrol
      weight: 20
    - id: swarm
      weight: 20
    - id: lair
      weight: 15
    - id: solitary
      weight: 10
    - id: guard
      weight: 10
