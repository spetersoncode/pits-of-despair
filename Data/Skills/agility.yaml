type: agility

entries:
  quick_step:
    name: Quick Step
    flavor: Swift footwork carries you past danger.
    description: "Move 2 tiles in the selected direction."
    category: active
    targeting: line
    range: 2
    willpowerCost: 2
    prerequisites:
      agi: 1
    tags:
      - movement
      - utility
    effects:
      - steps:
          - type: move_tiles
            amount: 2

  defensive_stance:
    name: Defensive Stance
    flavor: Focus on reading your opponent's moves.
    description: "Stance: +1 evasion, -1 melee accuracy."
    category: toggle
    targeting: self
    willpowerCost: 0
    prerequisites:
      agi: 2
    tags:
      - defense
      - evasion
      - stance
      - toggle
    toggle:
      modifiers:
        - stat: evasion
          amount: 1
        - stat: melee_accuracy
          amount: -1
      wpDrainPerTurn: 0

  pinning_shot:
    name: Pinning Shot
    flavor: A well-placed arrow leaves your target reeling.
    description: "Prepare: On next ranged attack, daze target for 1 turn."
    category: active
    targeting: self
    willpowerCost: 3
    consumesTurn: false
    prerequisites:
      agi: 3
    tags:
      - ranged
      - crowd_control
      - prepare
    effects:
      - steps:
          - type: apply_prepare
            prepareName: Pinning Shot
            attackTypeFilter: ranged
            onHitCondition: daze
            onHitConditionDuration: "1"
            duration: "5"

  double_shot:
    name: Double Shot
    flavor: Loose two arrows before your enemy can react.
    description: "Fire two ranged attacks at one target."
    category: active
    targeting: enemy
    range: 8
    willpowerCost: 6
    prerequisites:
      agi: 3
    tags:
      - ranged
      - damage
      - multi-attack
    effects:
      - type: ranged_attack
        count: 2

  riposte:
    name: Riposte
    flavor: Turn your enemy's failure into your opportunity.
    description: "On enemy miss: Counter-attack."
    category: reactive
    targeting: self
    willpowerCost: 0
    triggerCost: 0
    trigger: on_enemy_miss
    autoTrigger: true
    prerequisites:
      agi: 3
    tags:
      - melee
      - defense
      - combat
    effects:
      - type: counter_attack
