type: endurance

entries:
  thick_skin:
    name: Thick Skin
    description: +1 armor.
    category: passive
    targeting: self
    willpowerCost: 0
    prerequisites:
      end: 1
    tags:
      - defense
    effects:
      - type: armor_bonus
        amount: 1

  recover:
    name: Recover
    description: Heal END x 3 HP.
    category: active
    targeting: self
    willpowerCost: 5
    prerequisites:
      end: 2
    tags:
      - heal
    effects:
      - steps:
          - type: heal
            scalingStat: end
            scalingMultiplier: 3

  die_hard:
    name: Die Hard
    description: Once per floor, survive lethal damage at 1 HP.
    category: reactive
    targeting: self
    willpowerCost: 0
    triggerCost: 0
    trigger: on_lethal
    autoTrigger: true
    prerequisites:
      end: 4
    tags:
      - survival
      - defense
      - once_per_floor
    effects:
      - type: survive_lethal

  shoulder_charge:
    name: Shoulder Charge
    description: Charge an adjacent enemy, dealing 1d4+END damage and knocking them back 2 tiles. Collision with walls or creatures stuns on failed END save.
    category: active
    targeting: adjacent
    willpowerCost: 3
    prerequisites:
      end: 2
    tags:
      - melee
      - damage
      - knockback
      - crowd_control
    effects:
      - steps:
          - type: damage
            dice: 1d4
            scalingStat: end
            scalingMultiplier: 1
          - type: knockback
            distance: 2
            onCollision:
              - type: save_check
                saveStat: end
                attackStat: end
                stopOnSuccess: true
              - type: apply_condition
                conditionType: stun
                duration: 1d4
